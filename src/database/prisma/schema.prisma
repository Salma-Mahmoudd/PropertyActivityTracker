generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int            @id @default(autoincrement())
  name           String
  email          String         @unique
  password       String
  status         UserStatus     @default(OFFLINE)
  accountStatus  AccountStatus  @default(ACTIVE)
  role           UserRole       @default(SALES_REP)
  score          Int            @default(0)
  lastSeen       DateTime?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  activities UserActivity[]
}

model Property {
  id             Int            @id @default(autoincrement())
  name           String?
  latitude       Float
  longitude      Float
  address        String
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  userActivities UserActivity[]
}

model Activity {
  id             Int            @id @default(autoincrement())
  name           String
  weight         Int
  icon           String?
  description    String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  userActivities UserActivity[]
}

model UserActivity {
  id         Int                @id @default(autoincrement())
  userId     Int
  propertyId Int
  activityId Int
  note       String?
  createdAt  DateTime           @default(now())
  updatedAt  DateTime           @updatedAt

  user     User                 @relation(fields: [userId], references: [id])
  property Property             @relation(fields: [propertyId], references: [id])
  activity Activity             @relation(fields: [activityId], references: [id])
}

enum UserStatus {
  ONLINE
  OFFLINE
}

enum AccountStatus {
  ACTIVE
  INACTIVE
  DELETED
}

enum UserRole {
  SALES_REP
  ADMIN
}
